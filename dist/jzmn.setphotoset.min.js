!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.setPhotoset=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=function(a){return a.toString()===a},e=Array.isArray,f=function(){},g=function(a){return parseInt(a,10)},h=function(a){return Array.prototype.slice.call(a)},i=function(a){return"["===a.charAt(0)?a.replace(/\[([0-9,]*)\]/,"$1").split(",").map(g):a.split("").map(g)},j=function(a){return e(a)?a:d(a)?i(a):[]},k=function(a){return a&&a+(d(a)?"":"px")},l=function(){return Math.floor(1e5*Math.random()+1).toString()},m=function(a){return a?d(a)?h(document.querySelectorAll(a)):a.nodeType?[a]:a.length?h(a):void 0:[]},n=function(){var a=document.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("id","jzmn-setphotoset-styles"),a.appendChild(document.createTextNode("")),document.head.appendChild(a),[".photoset-container:after {content:'';display:table;clear:both;}",".photoset-item { display:block;float:left;margin:0;height:auto;}",".photoset-last-column {margin-right:0;}",".photoset-first-column {clear:left}",".photoset-last-row {margin-bottom:0;}"].forEach(function(b){return a.sheet.insertRule(b,a.sheet.cssRules.length)}),a},o={},p=document.querySelector("#jzmn-setphotoset-styles"),q=function(a){var b=a.grouping,c=a.gutter;p||(p=n()),c&&!o[b]&&(o[b]=c,[".photoset-"+b+" .photoset-item:not(.photoset-last-column) { margin-right: calc("+c+"); }",".photoset-"+b+" .photoset-item:not(.photoset-last-row) { margin-bottom: calc("+c+"); }"].forEach(function(a){return p.sheet.insertRule(a,p.sheet.cssRules.length)}))},r=function(a,b){var c=b.immediate,d=b.childItem;b.childHeight,b.childWidth;return new Promise(function(b,e){var f=h(a.querySelectorAll(d)),g=function(a){return b(f)},i=f.length;c&&g();var j=function(a){a.target&&a.target.matches(d)&&0===--i&&g()};f.forEach(function(a,b){a.complete&&0===--i&&g()}),a.addEventListener("load",j,!0),a.addEventListener("error",j,!0)})},s=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.childHeight,d=b.childWidth;return function(b){return b.map(function(b,e){if(a)return b.naturalHeight/b.naturalWidth;var f=parseInt(b.getAttribute(c))/parseInt(b.getAttribute(d));return isNan(f)?1:f})}},t=function(a){var b=a.layout;a.gutter;return function(a){var c=b.length,d=[];return b.reduce(function(b,e,f,g){var h=b+e,i=a.slice(b,h),j=rowItems.length,k=0;i.forEach(function(a,b){var e=0;e=0==b?k=100/i.reduce(function(b,c){return b+a/c},0):k*(i[0]/a);var g={firstColumn:0===b,lastColumn:b===j-1,lastRow:f===c-1};d.push({width:e,numItems:j,positioning:g})});return h},0),d}},u=function(a,b){var c=b.childItem,d=b.gutter,e=h(a.querySelectorAll(c));return function(a){a.forEach(function(a,b){var c=a.width,f=a.numItems,g=a.positioning,h=g.firstColumn,i=g.lastColumn,j=g.lastRow,k=e[b];k.classList.add("photoset-item"),k.classList.remove("photoset-last-column","photoset-last-row","photoset-first-column"),k.setAttribute("style","width: "+c+"%;"+(d?"width: calc("+c/100+"*(100% - "+(f-1)+"*("+d+")));":"")),h&&k.classList.add("photoset-first-column"),i&&k.classList.add("photoset-last-column"),j&&k.classList.add("photoset-last-row")})}},v=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.layout,d=void 0===c?null:c,e=b.immediate,g=void 0!==e&&e,h=b.childItem,i=void 0===h?"img":h,n=b.childHeight,o=void 0===n?"height":n,p=b.childWidth,v=void 0===p?"width":p,w=b.gutter,x=void 0===w?0:w,y=b.callback,z=void 0===y?f:y,A=b.createSheet,B=void 0===A||A,C=b.layoutAttribute,D=void 0===C?"data-layout":C,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return g=g||"img"!=i,a=m(a),x=k(x),B&&q({grouping:E,gutter:x}),a.forEach(function(a){d=j(d||a.getAttribute(D)),a.classList.add("photoset-loading","photoset-container","photoset-"+E),r(a,{immediate:g,childItem:i}).then(s({immediate:g,childHeight:o,childWidth:v})).then(t({layout:d})).then(u(a,{childItem:i,gutter:x})).then(z)}),a};b.exports=v},{}]},{},[1])(1)});