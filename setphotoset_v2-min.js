var jzmn=jzmn||{};jzmn.setPhotoset=function(t,e){if(!t)throw new Error("[setPhotoset] Element does not exist");if(t.length)return Array.prototype.forEach.call(t,function(t){jzmn.setPhotoset(t,e)});e=e||{};var r={layout:0,pData:!1,childHeight:"height",childWidth:"width",gutter:0};Object.keys(e).map(function(t){t in r&&(r[t]=e[t])});var i=Array.prototype.slice.call(t.children),n=(r.layout||t.getAttribute("data-layout")||"").split("").map(function(t){return parseInt(t)}),a=n.length;n.reduce(function(t,e,n){var o=[],s=[],h=t+e,c=i.slice(t,h),u=c.length;return c.forEach(function(t,e){t.classList.add("photoset-item"),e===u-1&&t.classList.add("photoset-last-column"),n===a-1&&t.classList.add("photoset-last-row"),o[e]=r.pData?parseInt(t.getAttribute(r.childHeight))/parseInt(t.getAttribute(r.childWidth)):t.naturalWidth?t.naturalHeight/t.naturalWidth:t.offsetHeight/t.offsetWidth}),c.forEach(function(t,e){var i,n=o[e];0===e?(i=o.reduce(function(t,e){return t+n/e},0),s[e]=100/i):e===u-1?(i=s.reduce(function(t,e){return t+e},0),s[e]=100-i):s[e]=s[0]*(o[0]/n),t.setAttribute("style","width: "+s[e]+"%; "+(r.gutter?"width: calc("+s[e]/100+"*(100% - "+(u-1)+"*("+r.gutter+")))":""))}),h},0)};